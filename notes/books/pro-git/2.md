# Основы Git
Создать Git репозиторий можно двумя способами:
1. Инициализировать Git в текущем рабочем каталоге командой __git init__.
    Это создаст в текущем каталоге, новый подкаталог `.git`.
    Каталог `.git` содержит все необходимые файлы репозитория - структуру Git репозитория.
2. Клонировать существующий командной __git clone__ `https://github.com/user/rep`.

Если вы хотите добавить под версионный контроль существующие файлы, вам нужно добавить их в
индекс и выполнить коммит изменений.
```vim
git add *.py
git add filename.txt
git commit -m 'Initial project version'
```
Клонировать репозиторий в каталог: __git clone__ `https://github.com/user/rep` `folder`.
В Git реализованно несколько транспортных протоколов:
1. `https://`
2. `git://`
3. `user@server:path/to/repo.git` (ssh)

Какая разница между автором и коммитером?
Автор это тот кто изначально сделал работу, а коммитер последний кто применил эту работу.

## Команды
- __git status__ `--short`
  Определяет состояние файлов.
  `--short` Короткий вывод.
- __git add__ `file`
  Добавляет файл или целый каталог в отслеживаемые.
- __git rm__ `file`, `-f`, `--cached`
  Удаляет файл из отслеживаемых и из каталога.
  `-f` Принудительное удаление. (если изменили и проиндексировали)
  `--cached` Удаляет файл из отслеживаемых но оставляет его в каталоге.
- __git reset__ `HEAD file`
  Отменяет индексацию файла.
  Рекомендуется использовать __git restore__.
- __git restore__ `--staged file`
  Восстанавливает файлы или удаляет их из индексации.
  Если не указана опция `--staged`, заменит файл версией из последнего коммита.
  `--staged` Удаляет файл из индексации.
- __git checkout__ `-- file`
  Перейдет в ветку.
  `-- file` Заменит файл версией из последнего коммита.
- __git mv__ `file file2`
  Переименовывает файл.
- __git diff__ `--staged`, `--cached`
  Показывает какие строки были изменены.
  `--staged --cached` Сравнивает измененные строки и строки до изменения. (проиндексированные)
- __git commit__ `-v`, `-m "message"`, `-a`, `--amend`
  Зафиксирует проиндексированные изменения.
  Когда вы выполняете коммит - вы сохраняете снимок состояния вашего проекта.
  `-v` Добавляет в комментарий __git diff__ изменения.
  `-m "message"` Добавляет комментарий к коммиту, без открытия редактора. 
  `-a` Автоматически индексирует отслеживаемые файлы.
  `-amend` Заменит предыдущий коммит.
- __git remote__ `-v`, `add name url`, `show remote-name`, `rename rep new`, `remove rep`
  Показывает список настроенных удаённых репозиториев.
  `-v` Показывает адреса для чтения и записи, привязанные к репозиторию.
  `add name url` Добавляет удалённый репозиторий и присваивает ему имя.
  `show remote-name` Показывает репозиторий.
  `rename rep new` Переименовывает репозиторий `rep` на `new`.
  `remove rep` Удаляет репозиторий.
- __git clone__ `https://github.com/user/rep`
  Копирует удаённый репозиторий по ссылке.
- __git fetch__ `remote-name`
  Обновляет локальные файлы из удалённого репозитория.
  Но не модифицирует то над чем вы работаете в данный момент.
  `remote-name` = `origin`?
- __git pull__
  Обновляет локальные файлы из удалённого репозитория, обновляя все файлы.
  - __git config__ `--global pull.rebase "false"` Смещение вперед если возможно, иначе коммиты.
  - __git config__ `--global pull.rebase "true"` Преобразовывает при получении изменений.
- __git push__ `remote-name`, `branch-name`
  Отправляет изменения на удалённый репозиторий. __git push__ `origin` `master`.
- __git tag__ `-l --list`, `"tag-name"`, `-a`, `-d`
  Показывает список имеющихся тегов.
  `-l --list` Показывает в виде списка.
  `"tag-name"` Поиск тэга по имени. (`-l` обязателен)
  `"tag-name"` Создание легковесного тэга по имени.
  `-a v1.4 -m "message"` Создает тэг с именем `v1.4` и комментарием `message`.
  `-a v1.2 9fceb02` Создает тэг на коммите.
  `-d tag-name` Удаляет тэг по имени из локального репозитория.
  __git push__ `origin` `:refs/tags/tag-name` Удаляет тэг из удалённого репозитория.
  __git push__ `origin` `--delete tag-name` Удаляет тэг из удалённого репозитория.
- __git show__ `name`
  Показывает данные объекта.
  `name` Название объекта.
- __git config__ `--global alias.name command`
  Создает алиас. (сокращенная команда)
  `alias.last 'log -1 HEAD'` Показывает последний коммит.
  `alias.name` Название алиаса.
  `command` Название команды.
- __git log__ `-p --patch`, `-2`, `--stat`, `--shortstat`, `--name-only` `--name-status` , `--graph`,
  `--abbrev-commit`, `--relative-date`, `--pretty`, `--oneline`, `--since`, `--after`, `--until`, `--before`
  `--grep`, `-S`, `log -- path/to/file`, `--author`, `--commiter`, `--no-merges`
  Показывает историю коммитов.
  `-p --patch` Также показывает diff изменений.
  `-2` Ограничивает вывод истории до 2.
  `--stat` Показывает сокращенную информацию.
  `--shortstat` Показывает строку только с количеством: изменений, удалений, вставок.
  `--name-only` Показывает список измененных файлов после информации о коммите.
  `--name-status` Показывает список файлов: удален, добавлен, изменен.
  `--relative-date` Показывает дату в относительном формате. (2 weeks ago)
  `--graph` Показывает небольшой граф с текущей веткой и историю слияний.
  `--author` Фильтрует результаты по автору коммита.
  `--grep` Фильтрует по ключевым словам в сообщение коммита.
  `-S text` Фильтрует коммиты по введенной строке.
  ` -- path/to/file` Ограничивает вывод для файла или каталога. (указывается последней)
  `--since=2.weeks` Показывает список коммитов сделанных за последние две недели.
  `--after=2.days` Показывает коммиты от двух дней и позже.
  `--until`, `--before` Показывает коммиты до указанной даты.
  `--commiter` Показывает коммиты по автору коммита.
  `--no-merges` Отключат коммиты слияния из вывода.
  `--oneline` Сокращение для `--pretty=oneline`.
  `--pretty=oneline/short/full/fuller` Вывод в формате меньше - больше.
  `--pretty=format:"%h - %an, %ar, : %s"` Вывод в своем формате.
  Форматы `--pretty=format:`
  - `%H` Хэш коммита.
  - `%h` Сокращенный хэш коммита.
  - `%T` Хэш дерева.
  - `%t` Сокращенный хэш дерева.
  - `%P` Хэш родителей.
  - `%p` Сокращенный хэш родителей.
  - `%an` Имя автора.
  - `%ae` Электронная почта автора.
  - `%ad` Дата автора.
  - `%ar` Относительная дата автора.
  - `%cn` Имя коммитера.
  - `%ce` Электронная почта коммитера.
  - `%cd` Дата коммитера.
  - `%cr` Относительная дата коммитера.
  - `%s` Содержание.

## Игнорирование файлов
Справка: __man__ `gitignore`.
Необходимо создать файл `.gitignore` в корне прокета и записать имена или расширения файлов.
`.gitignore` Можно использовать и в подкаталогах.
```vim
/TODO " Игнорировать файл TODO в корневом каталоге, но не в подкаталогах.
.[oa] " Игнорирует все файлы которые заканчиваются на o или a.
!lib.a " Отслеживать файл даже если он попадает под исключение.
folder/ " Игнорировать все файлы в каталоге.
folder/*.txt " Игнорировать файлы .txt в каталоге, но не подкаталогах.
```
`.gitignore` Шаблоны применяют следущие правила:
- Пустрые строки и строки начинающиеся с # игнорируются.
- Стандартные шаблоны являются глобальными, применяются для всего древа каталогов.
- Чтобы избежать рекурсии применяйте символ / в начале шаблона.
- Чтобы исключить каталог добавьте символ / в конец шаблона.
- Чтобы инвертировать шаблон, поставьте символ ! в начало шаблона.

## Тэги
В Git существует два типа тэгов.
1. Легковесный. Простой указатель на коммит, похоже на ветку.
2. Аннотированый. Хранится в базе Git как полноценный объект. (содержит: имя, дата, почта)
По умолчанию тэги не отправляются на удалённый репозиторий, чтобы выполнить отправку тэга,
выполните команду __git push__ `origin` `tag-name` (`--tags` вместо `tag-name` отправит все тэги)

__git tag__ `-l --list`, `"tag-name"`, `-a`, `-d`
Показывает список имеющихся тегов.
`-l --list` Показывает в виде списка.
`"tag-name"` Поиск тэга по имени. (`-l` обязателен)
`"tag-name"` Создание легковесного тэга по имени.
`-a v1.4 -m "message"` Создает тэг с именем `v1.4` и комментарием `message`.
`-a v1.2 9fceb02` Создает тэг на коммите.
`-d tag-name` Удаляет тэг по имени из локального репозитория.
__git push__ `origin` `:refs/tags/tag-name` Удаляет тэг из удалённого репозитория.
__git push__ `origin` `--delete tag-name` Удаляет тэг из удалённого репозитория.
__git show__ `name`
Показывает данные объекта.
`name` Название тэга.
__git checkout__ `tag-name`
Переходит на тэг, но переводит репозиторий в состояние detached HEAD.
Это значит что если сделать коммит на этом тэге, то тэг не изменится, а коммит не будет
относится не к какой из веток, а доступ к нему можно получить только по хэшу.
`tag-name` Название тэга.
