# Глава 9. Функции
Первый шаг к повторному использованию кода - создание функций.
Функция это именованный фрагмент кода.
Функция может принимать входные параметры и возвращать любые значения.
Переданные в функцию переменные называются аргументами.
Переданные аргументы внутри функции называются параметрами.
Функция это такойже объект как и всё остальное в Python.
В Python круглые скобки в конце имени функции, означают что функцию нужно вызвать.
Функции не изменяемы.
Каждая функция имеет своё пространство имён.
Глобальные переменные доступны в функциях, но для режима чтения.
Если необходимо изменить глобальную переменную используйте ключевое слово `global`.
Функции `globals()` и `locals()` возвращают словарь переменных.
Имена функций начинающиеся и заканчивающиеся на `__`, зарезервированы для
использования внутри Python.
Когда функция вызывает саму себя - это называется рекурсией.
```python
def do_nothing():
  pass
  
do_nothing() # вызов функции
```
Оператор `pass` демонстрирует что функция ничего не делает.
Оператор `is` помогает выполнить проверку значения
```python
thing = None
if thing is None:
  ...
```
Значение параметров функции по умолчанию (именованные аргументы)
```python
def new_func(a, name='name', password='s1d3'):
  pass

new_func(a=123, 'new-name')
new_func(123,'name','pass')
```
Функция которая возвращает запоминающийся список
```python
def func(arg, result=[])
  result.append(arg)
  return result
  
func('a') # ['a']
func('b') # ['a', 'b']
```
Функция принимающая неопределённое количество аргументов в кортеж `args`
```python
def func(*args):
  for item in args:
    print('->', item)

func(1,2,3,4,5)
```
Функция принимающая неопределённое количество ключ-слов в словарь `**kwargs`
```python
def func(**kwargs):
  for key, value in kwargs.items():
    print(key, '->', value)

func(name='name', password='123321')
```
Добавление в функцию строки документации
```python
def func():
  'documentation string'
  pass

help(func) # показать строку документации
help(func.__doc__) # показать строку документации, без форматирования
```
Определение функции внутри другой функции
```python
def main_func():
  def sub_func():
    return 'sub-func'
    
  return sub_func()

print(main_func()) # 'sub-func'
```
Лямбда функция
```python
var = lambda word: word.capitalize() + '!'
print( var('new') ) # New!
```

## Генераторы
В Python генератор это объект который предназначен для создания последовательностей.
С его помощью вы можете итерировать потенциально огромные последовательности,
не создавая и не сохраняя всю последовательность в памяти сразу.
Каждый раз когда вы итерируете через генератор, он отслеживает, где находился
во время последнего вызова.
Генератор можно запустить лишь однажды.
Функция генератор наподобие генератора последовательностей `range()`
```python
def m_range(first=0, last=10, step=1):
  number = first
  while number < last: 
    yield number
    number += step
ranger = m_range(0,10)
for i in ranger:
  print(i)
```
Включения генераторов, создаются через круглые скобки
```python
genobj = (pair for pair in zip(['a', 'b'], ['1', '2']))
```

## Дектораторы
Декоратор это функция, которая принимает одну функцию в качестве аргумента и
возвращает другую функцию.
У каждой функции может быть больше одного декоратора.
Приоритет выполнения декораторов снизу-вверх.
Функция декоратор для логирования вызова и результата функции
```python
def document_it(func):
  def new_function(*args, **kwargs):
    print('Running function:', func.__name__)
    print('Positional arguments:', args)
    print('Keyword arguments:', kwargs)
    result = func(*args, **kwargs)
    print('Result:', result)
    return result
  return new_function
```
Также можно добавить конструкцию `@имя_декоратора` перед функцией, чтобы декорировать её
```python
@document_it
def m_func():
  pass
```

## Исключения
Исключение является классом, частным случаем класса `Exception`.
Создание своего исключения
```python
class UppercaseException(Exception):
  pass

raise UppercaseException('text') # вызов исключения
```
