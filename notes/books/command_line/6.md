# Перенаправление
В этой главе мы познакомимся с самой крутой возможностью командной строки,
__перенаправление ввода/вывода__. Благодаря этой возможности, мы сможем
перенаправлять ввод и вывод команд из файлов в файлы, а также составлять
из команд целевые конвейеры.
Команды главы:
- `cat` объеденяет файлы.
- `sort` сортирует строки текста.
- `uniq` сообщает о повторяющихся строках, или удаляет их.
- `grep` находит и выводит строки соответствующие шаблону.
- `wc` выводит число символов перевода строки, слов и байтов.
- `head` выводит первые строки из файла.
- `tail` выводит последние строки из файла.
- `tee` читает со стандартного ввода и записывает в стандартный вывод, файл.

## Стандартный ввод, вывод и вывод ошибок
Вывод программ в консоль делится на два типа.
1. Результаты работы программы.
2. Сообщения о состоянии или ошибках.
В действительности многие программы, выводят свои результаты в спец файл,
который называется __стандартным выводом__ (standard output, stdout).
Сообщения о состоянии в __стандартный вывод ошибок__(standard error, stderr).
По умолчанию, эти два файла связаны с экраном и не сохраняются на диске.
Многие программы принимают ввод из спец файла __стандартный ввод__
(standard input, stdin), который по умолчанию связан с клавиатурой.
Механизм перенаправления __ввода/вывода__ позволяет изменять направление
__ввода__ и __вывода__, вывод осуществляется на экран, а ввод с клавиатуры.
Но механизм перенаправления позволяет изменить этот порядок вещей.
`команда > файл` перенаправит результат команды в файл. `ls > file.txt` 
Сообщения об ошибках не перенаправятся в этот файл, так как стандартный
вывод это не стандартный вывод ошибок. Это два разных потока.
Команда `> file` без левого блока, просто очистит или создаст файл.
Команда `ls >> file` добавит результат в конец файла.
Производить вывод можно в один из трёх файловых потока:
0. Стандартный ввод.
1. Стандартный вывод.
2. Стандартный вывод ошибок.
Командная оболочка ссылается на них как на файловые дескрипторы 0,1,2.
`ls 2> file` перенаправит вывод ошибок в файл.
Номер файлового дескриптора помещается непосредственно перед оператором
перенаправления.
Чтобы задействовать сразу два потока, используйте `ls > file 2>&1`.
Имейте ввиду что порядок перенаправления играет важную роль.
Перенаправление __вывода ошибок__ всегда должно производится после __вывода__.
Современный __bash__ поддерживает более простой оператор `ls &> file`.
Ненужный вывод можно перенаправить в `/dev/null` (битоприёмник/корзина).
`ls 2> /dev/null` подавляет вывод сообщений об ошибках.

## Перенаправление стандартного ввода
Команда `cat` читает содержимое одного или нескольких файлов и копирует
его в стандартный вывод.
`cat file.txt`
Она часто используется для вывода небольших текстовых файлов.
Также она способна принимать несколько файлов и объеденять их.
`cat movie.0* > movie`
Если вызвать команду `cat` без аргументов, она будет читать данные со
__стандартного ввода__. `CTRL+D` сообщает о конце файла.
Запись текста в файл осуществляется так `cat > file.txt`.

## Конвейеры
Это механизм командной оболочки, благодаря которому можно связать вывод
одной команды с вводом другом.
`команда | команда`
Тоесть конвейеры ползволяют объеденять вместе сразу несколько команд.
`ls /bin /usr/bin | sort | less`
Часто этот оператор называют оператором канала.

## uniq - поиск или удаление повторяющихся строк
Команда `uniq` часто используется вместе с командой `sort`, `uniq` принимает
сортированный список данных со стандартного ввода или из файла и по
умолчанию удаляет повторяющиеся строки из списка.
Чтобы получить список дубликатов нужно добавить параметр `-d`.

## wc - вывод числа строк, слов и байтов
Команда `wc`(word count) используется для подсчета числа слов, строк или
байтов в файлах.
`wc file.txt`
Если вызвать `wc` без аргументов, она будет считывать с __стандартного ввода__.
Параметр `-l` ограничывает вывод результатов только числом строк.

## grep - поиск строк соответствующих шаблону
`grep` очень мощная программа, она часто используется для поиска текста в
файлах по шаблону.
`grep шаблон файлы`
Более сложные шаблоны называют регулярными выражениями.
`ls /usr/bin | sort | uniq | grep zip`
__Параметры__
- `-i` игнорирует регистр символов.
- `-v` выводит результаты где совпадение не найдено.
 
## head/tail вывод первых/последних строк из файлов
По умолчанию обе программы выводят 10 строк из файла, изменить количество
строк можно параметром `-n`.
Команда `tail` позволяет наблюдать за изменением файла в режиме реального
времени `-f`. Удобно для набдлюдения новых записей в журналах.
`tail -f /var/log/messages`
`CTRL+C` прерывает этот процесс.

## tee - чтение со стандартного ввода и запись в стандартный вывод/файл
Программа `tee` читает данные со __стандартного ввода__ и копирует их в
__стандартный вывод__ или файлы. Удобно использовать в __конвейерах__.


