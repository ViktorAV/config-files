# Глава 1. Установка Linux
> Мультизагрузка - это установка на компьютер нескольких операционных систем,
> которые можно выбрать в меню загрузки.

## Дистрибутивы
Портал https://distrowatch.com публикует обзоры и рейтинг сотни дистрибутивов. 
Все дистрибутивы используют одно ядро, по этому они похожи в своей основе.
Различия дистрибутивов
- Инструменты установки программного обеспечения.
- Настройки по умолчанию.
- Расположение файлов.

Установочные образы распространяются в формате ISO 9660.
Типы установочных образов
- Live-версия. Загружается и работает с USB.
- Обычные. Устанавливаются на жёсткий диск.
- Обычные с загрузкой из сети.

## Прошивки BIOS и UEFI
Когда вы запускаете компьютер, первые программные инструкции которые он выполняет,
извлекаются из прошивки BIOS/UEFI в материнской плате.
- BIOS это старая система.
- UEFI это современная замена BIOS.
  Экраны настройки UEFI управляют
    - Порядком загрузки устройств.
    - Параметрами безопасности.
    - Безопасной загрузкой.
      > secure boot (Безопасная загрузка) - это функция безопасности UEFI.
      > Если включена, будет загружать только операционные системы с подписными ключами.
      Для установки многих дистрибутивов его нужно отключить.
    - Разгоном.
    - Отображением состояния оборудование и сети.
    - И еще множество других функций.
Чтобы зайти в настройки BIOS или UEFI необходимо нажать на клавишу в момент загрузки
системы, какая клавиша - зависит от материнской платы. (`F1` `F2` `F11` `F12` `Delete`)

## Проверка целостности установочного образа
Когда вы выполнили загрузку образа дистрибутива, его желательно проверить.
Это поможет нам убедиться что образ не был поврежден либо подменён где-то по пути.
Все производители сопровождают свои установочные образы подписными ключами и 
контрольными суммами.
Проверить образ в Ubuntu можно так
```bash
echo "f3f031f31j0281jfdsidf813 \ *ubuntu.iso" | shasum -a 256 --check
```

## Создание установочного USB носителя
- С помощью графических программ
  - UNetbootin
  - USB Creator
  - ISO Image Writer
  - Ether.io
  - Ventoy для живых образов и записей нескольких дистрибутивов.
- С помощью команды `dd` в консоли.
  Эта команда присутствует во всех дистрибутивах и работает одинаково.
  Для начала определите имя устройства командой `lsblk`, например _/dev/sdb1_.
  Отображает имена всех подключенных устройств.
  ```bash
  lsblk -o NAME,FSTYPE,LABEL,MOUNTPOINT
  ```
  Запись на устоновочный носитель с отображением процесса выполнения
  ```bash
  sudo dd status=progress if=path/to.iso of=/dev/sdb1
  ```
  Извлеките накопитель и вставьте его снова.


## Разбиение разделов жёсткого диска
Пример схемы раздела дисков
| Имя раздела  | Тип файловой системы  | Точка монтирования | Размер |
| ------------ | --------------------- | ------------------ | ------ |
| /dev/sda1    | ext4                  | /boot              | 500MB  |
| /dev/sda2    | ext4                  | /                  | 20GB   |
| /dev/sda3    | ext4                  | /home              | 75GB   |
| /dev/sda4    | ext4                  | /tmp               | 20GB   |
| /dev/sda5    | ext4                  | /var               | 20GB   |
| /dev/sda6    | swap                  |                    | 10GB   |
- Каждый раздел может иметь свой тип файловой системы.
- Создание раздела _/boot_ упрощает управление мультизагрузочными системами.
- Отдельный раздел _/home_ позволяет переустанавливать Linux не касаясь этой файл.систем.
- Отдельные разделы _/var_ и _/tmp_ предотвращает сбои на других файловых системах
  если что-то пойдет не так, в этих не контролируемых разделах.
- Создание раздела _swap_ подкачки, размером равным объёму оперативной памяти,
  позволяет организовать приостановку с сохранением на диск.

## Монтирование ISO-образа
В Linux есть псевдоустройство, называемое `loop` (петлевое) устройством.
С помощью него можно смонтировать образ _.iso_ так-же как файловое устройство.
Для начала создайте каталог для точки монтирования
```bash
mkdir dir
```
Смонтируйте образ _.iso_ в этот каталог
```bash
sudo mount -o loop my.iso dir
```
Образ на устройство смонтируется в режиме только для чтения.
Закончив с просмотром, размонтируйте образ.
```bash
sudo umount dir
```
