# Команды Linux ОС Linux имеет более тысячи программ, многие унаследованы от ОС unix __Команды поддерживают__ - [Перенаправление вывода](standard_io) в файл, разделителями `>` и `<` - Объединение нескольких параметров с короткими именами `ls -li` - [Конвейер(объединение) команд](standard_io), разделителем `|` - Ввод нескольких команд, разделителем `;` - Регистр символов __Типы команд__ 1. Выполняемая (`/usr/bin`, python и пр.) 2. Встроеная в оболочку (cd ls ) 3. Функция оболочки (reset clear) 4. Псевдонимы (alias) __Синтаксис__ `команда (-параметры | --параметры) аргументы`
__Список команд__
- __date__
  Выводит дату и время
  `Tue Aug 23 04:22:20 AM MSK 2022`
- __cal__
  Выводит календарь на текущий месяц в полу графическом стиле (таблица)
- __df__
  Отобразит таблицей свободное пространство на дисках
- __free__ 
  Отобразит таблицей свободное пространство в памяти
- __exit__
  Завершить сеанс работы терминала
- __pwd__
  Отобразить путь до текущего каталога (рабочего каталога)
- __cd__ `-LPe@` `path`
  Делает указанный каталог текущим (переходит в каталог)
  Возвращает 0 если каталог был успешно изменен (`$PWD` было изменено)
  Сокращения `path`
    - Домашний каталог (переменная `$HOME`)
    - `-` предыдущий каталог
    - `~user` каталог пользователя
  __Параметры__
  - `-L` Следовать за симлинками (по умолчанию)
  - `-P` Не следовать за симлинками, использовать физическую структуру каталогов
  - `-e` Если указан флаг `-P` и каталог не определится - вернёт не нулевой код
  - `@` Предоставляет файл с расширенными атрибутами
- __ls__ `-ltaAdFhrSi` `path`
  Отобразить файлы каталога, или нескольких каталогов в алфавитном порядке
  Формат отображения
    - `-l` (long) отобразит `-rw-rw-r--. 1 trac trac 0 Aug 17 23:00:00 notes`
      - `-rw-rw-r--` Тип файла и права доступа
      - `1` Число жестких __ссылок__ на файл
      - `trac` имя пользователя владеющего файлом
      - `trac` имя группы владеющей файлом
      - `0` Размер файла в байтах
      - `Aug 17 23:00:00` Дата и время последнего изменения
      - `notes` имя
    - `-t` (time) Отсортировать по времени изменения
    - `-a --all` Список всех файлов в т.ч. скрытых
    - `-A --almost-all` Тоже что и `-a` но без `.` и `..` каталогов
    - `-d --directory` Выводит информацию о каталоге вместо его содержимого
    - `-F --classify` Добавляет в конец индикатор `/` если это каталог
    - `-h --human-readable` отображает размеры в величинах, вместо байтов
    - `-r --reverse` Выводит результаты в обратном порядке
    - `-S` Отсортировать результаты по размеру
    - `-i` Отобразить индексы файлов
- __file__ `file`
  Отобразить тип файла
- __less__ `file`
  Это программа для просмотра содержимого файла, со скролом
- __cp__ `-airuv` `path` `to-path`
  Скопировать файлы или каталоги, можно указать несколько `path`
  __Параметры__
    - `-a --archive` Скопировать со всеми аттрибутами
    - `-i --interactive` Запрашивать подтверждении перезаписи файлов
    - `-r --recursive` Рекурсивное копирование
    - `-u --update` Копировать только отсутствующие файлы
    - `-v --verbose` Отображать информационные сообщения в процессе
- __mv__ `-iuv` `path` `to-path`
  Переместить или переименовать файл
  __Параметры__ теже что и __cp__
- __mkdir__ `-Zmpv` `path`
  Создает каталоги, можно создать сразу несколько
  __Параметры__
    - `-Z --context=CONTENT` (SELinux) Установить контекст безопасности
    - `-m --mode=` установить режит доступа
    - `-p --parents` создавать родительские каталоги если необходимо
    - `-v --verbose` отображать логи работы
- __rm__ `-irfv` `path`
  Удаляет файлы или каталоги, можно указать несколько
  С этой командной нужно быть осторожнее
  __Параметры__ тоже что и __cp__
    - `-f --force` Игнорировать отсутствующие и без `--interactive`
    - `-r --recursive` Удалять рекурсивно
- __ln__ `-s` `path`
  Создает Жесткие и Символические ссылки, для файлов или каталогов
  __Жесткая ссылка__
  Создается без параметров, __ln__ `path` `to-path`
    - Каждый файл имеет как минимум одну жесткую ссылку
    - Не может указывать на файл в другом разделе диска
    - Не может указывать на каталог
    - Не отличается от самого файла и никак не выделяется
    - Имеет размер целевого файла
  __Символическая ссылка__
  Содержит текстовый указатель на файл или каталог
  `-s` Создает символическую ссылку, __ln__ `../path` `to-path`
  Создавая символическую ссылку мы определяем текст описывающий
  местоположение целевого файла относительно симлинка (символической ссылки)
    - Поведение схоже с ярлыками Windows
    - Может указывать на каталог
    - Она почти не отличима от самого файла
    - Ссылки указывающие вникуда называются битыми ссылками
- __type__ `command`
  Отображает тип, как интерпритируется команда
- __which__ `command`
  Выводит расположение программы
  Сообщает какая (!)исполняемая программа будет выполнена
- __help__ `command`
  Отображает справку для встроенных команд (shell builtins)
- __man__ `-k` `num` `target`
  Отображает страницы справочного руководства (man-страницы) 
  Путь до __man__ файлов `/usr/share/doc/man-pages | man-db`
  Для отображения используется программа __less__
  Для поиска справочных страниц можно использовать команду __apropos__
  __Параметры__
    `-k` Ищет подходящие справочные руководства (как __apropos__)
  Справочные страницы содержат
   - Заголовок
   - Краткий обзор синтаксиса
   - Описание назначения комады
   - Список всех параметров с их описанием
  Синтаксис __man__ `раздел` `цель`
  Организация справочного руководства (разделы)
   1. Пользовательские комады (По умолчанию)
   2. Программные интерфейсы системных вызово в ядре
   3. Программные интерфейсы языка __C__
   4. Специальные файлы, узлы устройств и драйверы
   5. Форматы файлов
   6. Игры
   7. Прочее
   8. Команды системного администратирования
- __apropos__ `search-string`
  Находит искомое слово в справочных страницах и других местах
  Выводит список подходящих команд
- __info__ `command`
  Выводит запись из справочного руководства __info__ с описанием команды
- __whatis__ `command`
  Выводит очень краткое описание команды, ссылку на __man-страницу__
- __alias__ `command-name='commands -options'`
  Создает псевдоним для команды
  >Перед созданием псевдонима можно использовать команду __whatis__
  __Опции__
    - Отобразить все псевдонимы
- __unalias__ `alias`
  Удаляет псевдоним
- __cat__ `-AbeEnstTuv` `file`
  Объеденяет файлы (`cat movie.0* > movie.mpeg`)
  и выводит в стандартный вывод
  __Параметры__
    - Входит в поток ввода
    - `-A --show-all` используются флаги `-vET`
    - `-b --number-nonblank` нумеровать не пустые строки (`-n` перезаписывает)
    - `-e` используются флаги `-vE`
    - `-E --show-ends` добавить знак `$` в конце строк
    - `-n --number` нумеровать все строки
    - `-s --squeeze-blank` suppress повторяющиеся пустые строки
    - `-t` используются флаги `-vT`
    - `-T --show-tabs` заменить табуляции знаком `^I`
    - `-u` (игнорируется)
    - `-v --show-nonprinting` использовать нотации `^` и `M-` кроме табов
- __tac__
  Тоже что и __cat__ но выводит в обратную сторону
- __sort__
  Сортирует строки текста
- __uniq__
  Поиск или удаление повторяющихся строк
- __grep__ `-флаги` `шаблон` `файл`
  Флаги `-VEFGPefivwxycLlmoqsbHhnTZABCaDdIrRUz`
  Поиск строк по шаблону
  __Параметры__
    `-i` игнорировать регистр символов
    `-v` выводит строки не соответствующие шаблону (наоборот)
- __wc__ `-cmlLw`
  Вывод количество строк, слов или байтов
  __Параметры__
    `-c --bytes` вывести количество байтов
    `-m --chars` вывести количество символов
    `-l --lines` вывести количество строк
    `--files0-from=F` читать ввод из файла
    `-L --max-line-length` вывести максимальное отображение ширины строки
    `-W --words` вывести количество слов
- __head__ `-cnqvz` `file`
  Выводит первые 10 строк из файла
  __Параметры__
    `-c --bytes` вывести из количества байт
    `-n --lines` изменить количество строк вывода
    `-q --quiet --silent` не выводить заголовки
    `-v --verbose` всегда выводить заголовки
    `-z --zero-terminated` без переноса строк
- __tail__ `-cfFnqsvz`
  Опозиция __head__
  Удобна для просмотра журнала (логов)
  `-f` следит за файлом и обновляет вывод после записи
- __tee__ `-aip` `file`
  Читает из стандартного ввода и записывает в стандартный вывод или файлы
- __echo__ `string`
  Выводит строку текста
  Поддерживает подстановку строк `echo .[!.]?*`
  Поддерживает арифмитические вычисления `echo $((2+2/(2*2%2)**2-2))`
  Фигурные скобки 
- __printenv__ `name`
  Выводит список переменных оболочки и окружения
  __Параметры__
  - Выводит всё
  - `name` выводит значение указанной, также можно использовать __echo__
  __Переменные окружения__
  - __DISPLAY__ Имя дисплея. `:0` первый
  - __EDITOR__ Текстовый редактор
  - __SHELL__ Командная оболочка
  - __HOME__ Путь к домашнему каталогу
  - __LANG__ Набор символов и сортировки для языка
  - __OLDPWD__ Предыдущий рабочий каталог
  - __PAGER__ Программа постраничного просмотра (__less__)
  - __PATH__ Пути для поиска выполняемых программ
  - __PS1__ Строка ввода
  - __PWD__ Текущий рабочий каталог
  - __TERM__ Тип терминала, определяет протокол обмена
  - __TZ__ Определяет временную зону
  - __USER__ Имя пользователя
- __set__
  Устанавливает параметры командной оболочки
  __Параметры__
  - Выводит переменные оболочки и окружения
- __export__
  Экспортирует переменную, для использования в оболочке
- __sleep__ `num`
- __clear__
  Очищает экран
- __history__
  Выводит историю введенных команд `~/.bash_history`
  Клавиша `C-r`
- __id__ 
  Выводит информацию идентичности пользователя
- __chmod__
  Изменяет права доступа к файлу
  __Символические аргументы__ (__+__ Добавить, __-__ Удалить, __=__ Только заданные)
  - __u__ user
  - __g__ group
  - __o__ others
  - __a__ all (По умолчанию)
  `chmod +x` для всех, `chmod u+x` для пользователя, `go=rw,o-rw`
- __umask__
  Определяет права доступа к файлам по умолчанию
- __su__ `-lc` `user`
  Запускает командную оболочку от имени другого пользователя
  __Параметры__
  - Суперпользователь
  - `-` Сокращение `-l`
  - `-l` Загрузить окружение пользователя
  - `-c` Выполнить команду не изменяя пользователя
- __sudo__ `-il`
  Выполняет команду от имени суперпользователя
  __Параметры__
  - `-l` Отобразить привелегии суперпользователя
  - `-i` Изменить оболочку пользователя 
- __chown__ `user:group`
  `chown :group`, `chown user`, `sudo chown user: ~/file`
  Изменяет владельца и группу файла
- __chgrp__
  Изменяет группу файла
- __passwd__ `user`
  Изменяет пароль пользователя
- __ps__ `aux`
  Выводит список активных процессов
  __pstree__ В древовидной структуре
  __Параметры__
  - Список процессов текущего терминала
  - `a` Список запущенных программ?
  - `u` Как и `a` но более подробней
  - `x` Список активных процессов
  - `aux` Более подробный список, всех пользователей
  __Состояние процессов__
  - `R` Выполняется
  - `S` Приостановлен
  - `D` Приостановлен и ожидает завершение
  - `T` Остановлен
  - `Z` Недействующий процесс "Zombie" дочерний процесс от родителя который
    завершился и не был удалён
  - `<` Высокоприоритетный процесс 
  - `N` Низкоприоритетный процесс
- __top__
  Программа выводит обновляемый список наиболее активных процессов
  и информацию о потребляемых ресурсах
- __jobs__
  Выводит список активных заданий
- __bg__
  Переводит задание в фоновой режим работы
- __fg__ `%index`
  Переводит задание в нормальный режим работы (из фонового)
- __kill__ `-l` (`-Signal | -index`) `id`
  Посылает сигнал процессу
  __Сигналы__ (64)
  - `1 HUP` Обрыв связи
  - `2 INT` Прервать (`<C-c>`) 
  - `3 QUIT` Выйти
  - `9 KILL` Уничтожить
  - `11 SEGV` Ошибка сегментации
  - `15 TERM` Завершить (по умолчанию)
  - `18 CONT` Продолжить
  - `19 STOP` Приостановить
  - `20 TSTP` Приостановить (`<C-z>`)
  - `28 WINCH` Изменение размеров окна
  __Опции__
  `-l` Вывести список сигналов
- __killall__ `-u user` `-signal` `name`
  Завершает несколько процессов по имени
- __shutdown__ `-hr` `time`, __poweroff__, __reboot__, __halt__
  Завершает или перезагружает систему
  __Опции__
  - `-h` halt
  - `-r` reboot
- __mount__ `-t` `/dev/target` `/mnt/target`
  Монтирование файловой системы
  __Параметры__
  - Выводит список смонтированных файловых систем
  - `-t` Ползволяет указать тип файловой системы
- __umount__ `/dev/target`
  Размонтирование файловой системы
- __fsck__
  Проверяет и восстанавливает файловые системы
- __fdisk__ `/dev/target`
  Программа которая создает, изменяет или удаляет разделы на устройстве
  Необходимо сначала размонтировать устройство
  __Команды__
  - `m` Вывести справку
  - `p` вывести таблицу разделов
  - `n` добавить новый раздел
  - `w` сохранить изменения и выйти
  - `x` дополнительные функции
  - `d` удалить раздел
  - `t` изменить тип раздела (`L` выведет список)
  - `l` список известных типов раздела
  - `a` изменить флаг загрузочного раздела
  - `b` изменить вложенную BSD-метку диска
  - `c` переключить флаг совместимости с DOS
  - `q` выйти без сохранения изменений
  - `s` создать новую пустую таблицу разделов Sun
  - `u` изменить единицы отображение ввода вывода
  - `v` проверить таблицу разделов
- __mkfs__ `-t ext4` `/dev/target`
  Создает файловые системы
- __dd__ `if=/dev/from of=(/def/to | distr.iso)`
  Запись блоков данных в устройство
  Или перемещение файлов с одного диска в другой
  Можно использовать для копиранования файлов системы и потом восстановления
- __mkisofs__, __genisoimage__
  Создать файл образа ISO 9660
  __Параметры__
  `-R` добавить метаданные Rock Ridge которые позволяют использовать
    длинные имена файлов и права доступа POSIX
  `-J` тоже что и `-R` но для Windows
- __cdrecord__, __wodim__ `dev=/dev/target blank=fast`
  Записать данные на носитель
  `wodim dev=/dev/cdrw image.iso` Создать образ
  __Параметры__
  `dev=` Устройство
  `blank=` Метод очистки
  `-v` Подробности выполнения
  `-dao` Режим записи диск целиком (режим по умолчанию - по одной дорожке)
- __md5sum__ `file`
  Вычислить контрольную сумму MD5
- __ping__ `address`
  Посылает пакеты ICMP ECHO_REQUEST узлам в сети
- __traceroute__
  Выводит трассировку маршрута пакетов к сетевому узлу
- __ip__
  Выводит информацию о маршрутах, устройствах, туннелях и позволяет
  управлять ими
- __netstat__
  Программа для исследования различных настроек и статистик сети
  Выводит список сетевых соединений, таблицы маршрутов статистику
  интерфейсов, маскируемые соединения и информацию о широковещательных
  группах
- __ftp__ `address`, __scp__, __sftp__
  Программа передачи файлов
  __Команды__
  `cd path` переходит в папку в удаленной системе, `lcd` локально
  `ls` выводит список файлов текущей папки
  `get file` послать запрос на получение файла
  `bye | exit | quit` выйти
  `help` вывести справку
- __wget__
  Загрузчик файлов из сети
- __ssh__ `user@host`
  Программа для удаленного входа в систему, по защищеному протоколу
  __Параметры__
  `-X` Запустить с отображением X сервера
- __locate__
  Быстрый поиск в базе данных по имени файла
  База данных обновляется раз в сутки (__updatedb__)
- __find__
  Поиск файлов в иерархии каталогов
  __Параметры__
  `-type` тип файла (`fdbcl`)
  `-size` размер файла (`-size +1M | -1G`)
    - `+` Больше, `-` меньше
    - `b` блоки размером 512 байт (по умолчанию)
    - `c` байты
    - `w` 2 байтные слова
    - `k` килобайты
    - `M` мегабайты
    - `G` гигабайты
  `-name` шаблон файла (`-name "*.jpg"`)
  `-cmin` поиск по времени (+Минут, -Минут)
  `-cnever file` поиск по файлам которые изменялись позже указанного
  `-ctime` файлы которые изменялись ? дней назад
  `-empty` пустые файлы и каталоги
  `-group` по группе
  `-iname` как и `-name` но различает регистр символов
  `-inum` по индексу (удобно для поиска ссылок)
  `-mmin` файлы которые изменялись ? минут назад
  `-mtime` дней назад
  `-nouser` не пренадлежащим какому-либо пользователю
  `-nogroup` не пренадлежащим группе
  `-perm` по правам доступа (восьмеричное или символьное)
  `-samefile file` как и `-inum` 
  `-user name` поиск по владельцу файла
  `-depth` сначала обрабатывать файлы, потом каталоги
  `-maxdepth` максимальная глубина
  `-mindepth` минимальная
  `-mount` не выполнять обход смонтированых каталогов
  `-noleaf` не оптимизировать поиск
  Операторы
  `find ~ \( -type f -and -perm 0600 \) -or \( -not -type d \)`
  __Операции__
  - `-delete` удаляет файлы
  - `-ls` эквивалетно __ls__
  - `-print` выводит путь (по умолчанию)
  - `-quit` завершает выполнение после первого найденого
  - `-exec` выполнить команду `-exec rm '{}' ';'`
    - `+` в конце (вместо `;`) сделает вызов команды только 1 раз
      а не для каждого файла
  - `-ok` выполнить команду пользователя `-ok ls -l '{}' ';'`
    - Запрашивает подтверждение
- __xargs__ `command`
  Конструирует команды из стандартного ввода и выполняет их
  Например она может преобразовать список вывода в аргументы
  и передать их команде (конвейером)
- __touch__
  Создает файл или изменяет временные метки файла
- __stat__ `file`
  Выводит статус файла или файловой системы
- __gzip__
  Сжимает и распаковывает файлы
- __bzip2__
  Поблочное сжатие
- __tar__
  Архивирование
- __zip__
  Упаковывает и сжимает файлы
- __rsync__
  Синхронизация файлов с удаленной системой

