# Командная оболочка (shell) Linux
Это программа которая принимает введенные [команды](commands) и передает их
операционной системе для выполнения.
- __sh__
  Оболочка __Unix__ систем
- __bash__ (Bourne Again Shell)
  Улучшенный sh
- __zsh__
__Интерфейсы командных оболочек__
- CLI (Command Line Interface)
  Выполняет простые задачи более эффективно
- GUI (Graphical User Interface)
  Выполняет сложные задачи эффективнее
Перезагрузка командной оболочки выполнятся её перезапуском
либо командой __source__ `.bashrc`

- [Клавиши](## Клавиши)
- [Командная строка](## Командная строка)
- [Эмулятор терминала](## Эмулятор терминала)
- [История команд](## История команд)
- [Файлы оболочки](## Файлы оболочки)
- [Экранируемые специальные символы](## Экранируемые специальные символы)

## Клавиши
| Клавиша | Действие                                |
|---------|-----------------------------------------|
| `C-a`   | Переводит курсор в начало строки        |
| `C-e`   | Переводит курсор в конец строки         |
| `C-f`   | Переводит курсор на один символ вперед  |
| `C-b`   | Переводит курсор на один символ назад   |
| `A-f`   | Переводит курсор на одно слово вперед   |
| `A-b`   | Переводит курсор на одно слово назад    |
| `C-w`   | Удаляет последнее слово                 |
| `C-h`   | Удаляет последний символ                |
| `C-u`   | Удаляет строку назад                    |
| `C-k`   | Удаляет строку вперед                   |
| `C-l`   | Очищает экран консоли                   |
| `C-y`   | Вставляет текст из буфера (удаленный)   |
| `C-r`   | Поиск в истории введеных команд         |
| `C-c`   | Отменить выполнение / закрыть           |
| `C-z`   | Приостановить выполнение                |
| `C-d`   | Ввести символ EOF, отменяет ввод        |
| `C-o`   | Выполнить строку                        |
| `C-j`   | Enter                                   |

## Командная строка
Приглашение к вводу (prompt shell)
`$` Команда выполняется от имени пользователя
`#` Суперпользователя

## Эмулятор терминала
Предоставляют доступ к командной строке (prompt shell)
По умолчанию в Linux запущено несколько сессий терминалов,
для доступа к ним используются клавиши `<C-A>F1 .. F6`
Наиболее популярные - urxvt, st, alacritty, kitty

## История команд
Обычно запоминается до тысячи введённых команд.
Чтобы получить к ним доступ используются стрелки вверх-вниз
или клавиши `<C-p>, <C-n>`, и для поиска `<C-r>`
Командная строка поддерживает подстановку команд из истории
- `!1` Подставит команду по индексу 1
- `!!` Последняя команда
- `!ss` найти строку которая начинается с ss
- `!?ss` найти строку которая содержит ss

## Файлы оболочки
__Сеансы входа__
- `/etc/profile`      Общесистемный конфигурационный файл
- `~/.bash_profile`   Пользовательский
- `~/.bash_login`     Прочитает этот если есть файл `.bash_profile`
- `~/.profile` 	    Прочитает этот если нет `.bash_profile .bash_login`
__Обычные сеансы__
- `/etc/bash.bashrc` Общесистемный конфигурационный файл пользователей
- `~/.bashrc`	Пользовательский
__Содержимое файла__ `.bash_profile`
```bash
# .bash_profile
# Загрузка псевдонимов
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi
# Определение пользовательского окружения для поиска программ
PATH=$PATH:$HOME/bin
export PATH
```

## Экранируемые специальные символы
| Символ \ | Описание                         |
|----------|----------------------------------|
| a        | Звуковой сигнал системы          |
| b        | Забой (backspace)                |
| n        | Новая строка                     |
| r        | Возврат каретки                  |
| t        | Табуляция                        |
| d        | Дата                             |
| h H      | Имя хоста, полное имя            |
| j        | Активные задания                 |
| l        | Имя терминала                    |
| s        | Имя командной оболочки           |
| t T      | Время 24 и 12ч форматы           |
| @ A      | Часы и минуты 24 и 12            |
| u        | Имя пользователя                 |
| v V      | Версия, версия и выпуск оболочки |
| w W      | Текущий каталог, имя каталога    |
| !        | Номер текущего индекса в истории |
| #        | Количество введённых команд      |
| $        | Пользователь/Суперпользователь # |
| \[       | Начало последовательности        |
| \]       | Конец последовательности         |
